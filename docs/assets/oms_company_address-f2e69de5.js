import{_ as A,O as y,c as B,x as t,v as U,y as o,J as q,P as F,o as g,z as V,S as K,Q as E,E as L,T as M,V as j}from"./index-20b3045b.js";import{a as f,E as O,b as D,c as s,d as J,e as Q,f as R,g as G}from"./index-6d1f17fb.js";let C;const h=()=>{C=O.service({lock:!0,text:"加载中...",spinner:"wave"})},_=()=>{C&&C.close()},H=async l=>{h();try{return await f.request({url:"/mall/oms-company-address/one/"+l,method:"get"})}catch(e){throw e}finally{_()}},W=async l=>{h();try{return await f.request({url:"/mall/oms-company-address/del/"+l,method:"get"})}catch(e){throw e}finally{_()}},X=async l=>{h();try{return await f.request({url:"/mall/oms-company-address/edit",method:"post",data:l})}catch(e){throw e}finally{_()}},Y=async l=>{h();try{return await f.request({url:"/mall/oms-company-address/add",method:"post",data:l})}catch(e){throw e}finally{_()}},Z=async l=>{h();try{return await f.request({url:"/mall/oms-company-address/page",method:"post",data:l})}catch(e){throw e}finally{_()}},I={One:H,Del:W,Edit:X,Add:Y,Page:Z};const $={data(){return{json:{current:1,size:99},searchText:"",currentPage:1,pageSize:6,total:0,tableData:[],editDialogVisible:!1,editItem:{},selectedRow:null}},computed:{paginatedData(){const l=(this.currentPage-1)*this.pageSize,e=l+this.pageSize;return this.filteredtableData.slice(l,e)},filteredtableData(){return this.searchText?this.tableData.filter(l=>String(l.id).includes(String(this.searchText))):this.tableData}},methods:{openEditDialog(l){this.editItem={...l},this.editDialogVisible=!0},handlePageChange(l){this.currentPage=l},saveEdit(){console.log(this.editItem),D.confirm("确定修改吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const l=this.tableData.findIndex(e=>e.id===this.editItem.id);l!==-1?this.tableData.splice(l,1,this.editItem):this.tableData.push(this.editItem),this.editDialogVisible=!1,s.success("修改成功！"),this.editItem={}}).catch(()=>{s.info("修改取消！")})},fetchData(){I.Page(this.json).then(l=>{this.tableData=l.data.data.page.records||l.data.records,console.log(l),s.success("刷新成功！")}).catch(l=>{s.error("刷新失败，请检查网络！"),console.error("Error fetching data:",l)})},Insert(l){I.Add(l).then(e=>{delete l.isNew,s.success("插入数据成功！")}).catch(e=>{s.error("插入数据失败！"),console.error("保存修改失败:",e)})},Alter(l){I.Edit(l).then(e=>{console.log("修改保存成功:",e.data),s.success("修改数据成功！")}).catch(e=>{s.error("修改数据失败！"),console.error("保存修改失败:",e)})},Del(l){D.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{I.Del(l.id).then(e=>{const p=this.tableData.findIndex(x=>x.id===l.id);p!==-1&&this.tableData.splice(p,1),console.log("删除成功:",e.data),s.success("删除成功！")}).catch(e=>{s.error(response.msg),console.error("删除失败:",e)})}).catch(()=>{})},delND(l){D.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.tableData.findIndex(p=>p.id===l.id);e!==-1&&this.tableData.splice(e,1),s.success("删除成功！")}).catch(()=>{s.error("删除失败！"),console.log("取消删除 API",l)})},addAPI(){s.success("添加数据ing");const l={addressName:"",city:"",detailAddress:"",id:0,name:"",phone:"",province:"",receiveStatus:0,region:"",sendStatus:0,isNew:!0};this.tableData.push(l);const e=Math.ceil(this.tableData.length/this.pageSize);this.handlePageChange(e)}},created(){this.fetchData()}},ee={class:"root"},te={slot:"footer"};function le(l,e,p,x,n,d){const i=q,r=G,v=y("Position"),m=L,u=F,P=y("EditPen"),k=y("Delete"),S=J,w=Q,c=M,z=j,T=R,N=y("CirclePlusFilled");return g(),B("div",ee,[t(i,{modelValue:n.searchText,"onUpdate:modelValue":e[0]||(e[0]=a=>n.searchText=a),placeholder:"请输入搜索关键字",clearable:"",onClear:l.clearSearch,onKeyup:U(l.performSearch,["enter"]),style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear","onKeyup"]),t(S,{data:d.paginatedData,"header-cell-style":{background:"#eef1f6",color:"#606266"},borde:""},{default:o(()=>[t(r,{prop:"id",label:"id"}),t(r,{prop:"name",label:"收发货人姓名"}),t(r,{prop:"phone",label:"收货人电话"}),t(r,{prop:"addressName",label:"地址名称"}),t(r,{prop:"province",label:"省/直辖市"}),t(r,{prop:"city",label:"市"}),t(r,{prop:"region",label:"区"}),t(r,{prop:"detailAddress",label:"详细地址"}),t(r,{prop:"receiveStatus",label:"是否默认收货地址：0->否；1->是"}),t(r,{prop:"sendStatus",label:"默认发货地址：0->否；1->是"}),t(r,{width:"150rpx",label:"操作"},{default:o(({row:a})=>[a.isNew?(g(),V(u,{key:0,size:"mini",class:"custom-button",type:"success",circle:"",onClick:b=>d.Insert(a)},{default:o(()=>[t(m,null,{default:o(()=>[t(v)]),_:1})]),_:2},1032,["onClick"])):(g(),V(u,{key:1,class:"custom-button",size:"mini",type:"warning",circle:"",onClick:b=>d.Alter(a)},{default:o(()=>[t(m,null,{default:o(()=>[t(v)]),_:1})]),_:2},1032,["onClick"])),t(u,{type:"primary",size:"mini",circle:"",onClick:b=>d.openEditDialog(a)},{default:o(()=>[t(m,null,{default:o(()=>[t(P)]),_:1})]),_:2},1032,["onClick"]),a.isNew?(g(),V(u,{key:2,size:"mini",type:"danger",circle:"",onClick:b=>d.delND(a)},{default:o(()=>[t(m,null,{default:o(()=>[t(k)]),_:1})]),_:2},1032,["onClick"])):(g(),V(u,{key:3,type:"danger",size:"mini",circle:"",onClick:b=>d.Del(a)},{default:o(()=>[t(m,null,{default:o(()=>[t(k)]),_:1})]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"]),t(w,{"current-page":n.currentPage,"page-size":n.pageSize,total:d.filteredtableData.length,onCurrentChange:d.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"]),t(T,{class:"form",modelValue:n.editDialogVisible,"onUpdate:modelValue":e[12]||(e[12]=a=>n.editDialogVisible=a),onClose:e[13]||(e[13]=a=>n.editDialogVisible=!1)},{default:o(()=>[t(z,null,{default:o(()=>[t(c,{label:"id"},{default:o(()=>[t(i,{modelValue:n.editItem.id,"onUpdate:modelValue":e[1]||(e[1]=a=>n.editItem.id=a),disabled:""},null,8,["modelValue"])]),_:1}),t(c,{label:"name"},{default:o(()=>[t(i,{modelValue:n.editItem.name,"onUpdate:modelValue":e[2]||(e[2]=a=>n.editItem.name=a)},null,8,["modelValue"])]),_:1}),t(c,{label:"phone"},{default:o(()=>[t(i,{modelValue:n.editItem.phone,"onUpdate:modelValue":e[3]||(e[3]=a=>n.editItem.phone=a)},null,8,["modelValue"])]),_:1}),t(c,{label:"addressName"},{default:o(()=>[t(i,{modelValue:n.editItem.addressName,"onUpdate:modelValue":e[4]||(e[4]=a=>n.editItem.addressName=a)},null,8,["modelValue"])]),_:1}),t(c,{label:"province"},{default:o(()=>[t(i,{modelValue:n.editItem.province,"onUpdate:modelValue":e[5]||(e[5]=a=>n.editItem.province=a)},null,8,["modelValue"])]),_:1}),t(c,{label:"city"},{default:o(()=>[t(i,{modelValue:n.editItem.city,"onUpdate:modelValue":e[6]||(e[6]=a=>n.editItem.city=a)},null,8,["modelValue"])]),_:1}),t(c,{label:"region"},{default:o(()=>[t(i,{modelValue:n.editItem.region,"onUpdate:modelValue":e[7]||(e[7]=a=>n.editItem.region=a)},null,8,["modelValue"])]),_:1}),t(c,{label:"detailAddress"},{default:o(()=>[t(i,{modelValue:n.editItem.detailAddress,"onUpdate:modelValue":e[8]||(e[8]=a=>n.editItem.detailAddress=a)},null,8,["modelValue"])]),_:1}),t(c,{label:"receiveStatus"},{default:o(()=>[t(i,{modelValue:n.editItem.receiveStatus,"onUpdate:modelValue":e[9]||(e[9]=a=>n.editItem.receiveStatus=a)},null,8,["modelValue"])]),_:1}),t(c,{label:"sendStatus"},{default:o(()=>[t(i,{modelValue:n.editItem.sendStatus,"onUpdate:modelValue":e[10]||(e[10]=a=>n.editItem.sendStatus=a)},null,8,["modelValue"])]),_:1})]),_:1}),K("div",te,[t(u,{onClick:e[11]||(e[11]=a=>n.editDialogVisible=!1)},{default:o(()=>[E("取消")]),_:1}),t(u,{type:"primary",onClick:d.saveEdit},{default:o(()=>[E("保存")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),t(u,{type:"primary",circle:"",size:"large",onClick:d.addAPI,style:{"margin-top":"20px","margin-left":"50%"}},{default:o(()=>[t(m,null,{default:o(()=>[t(N)]),_:1})]),_:1},8,["onClick"])])}const oe=A($,[["render",le]]);export{oe as default};
